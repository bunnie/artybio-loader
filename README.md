# artybio-loader

Loader for code into the Arty-based BIO eval board. Assumes that the csr.csv file in this repo matches the bitstream blown into the ROM on the A7 eval board.

Test that the Arty board is connected and configured by running --ident:

```
python3 ./bioloader.py --uart-port COM11 --ident
[CommUART] port: COM11 / baudrate: 1000000 / BIO on Arty A7 2025-06-14 23:04:00
```

Replace "COM11" with either the COM device number (on Windows) or the /dev/USB* entry (on Linux)

Load a program into the Arty:

```
python3 ./bioloader.py --uart-port COM11 --file 0x40000000 ..\xous-core\target\riscv32imac-unknown-xous-elf\release\baremetal.img
```

- Address `0x40000000` is the boot vector of the Arty-BIO CPU.
- The .img is the compiled binary output from running `cargo xtask baremetal` in the `xous-core` directory.

The invocation will also automatically reset the CPU and start running the code.

Note that you can also load binary files into other locations of memory with the same command, since the address is specifiable, but the CPU will still reboot after the load.

The `csr.csv` file in this directory contains a list of Litex-generated registers corresponding to the Arty BIO eval configuration. This is in turn generated by the `arty_bio.py` script in the [cram-soc](https://github.com/buncram/cram-soc/blob/bio/arty_bio.py) repo.

Every time the FPGA is rebuilt, it's recommended to update the csr.csv file.
